extends layout.pug

block pagevar
    - var pagename="é¦–é¡µ"

block content
    if user.isLoggedIn
        .container(style="margin-top:30px;")
            .row
                if user.isLoggedIn
                    unless user.verified || config.ignoreEmailVerification
                        .col-xl-12
                            #email-warning.jumbotron
                                p.lead âš ä½ çš„é‚®ç®±è¿˜æ²¡æœ‰é€šè¿‡éªŒè¯ï¼Œè¯·ç‚¹å‡»ä¸‹é¢çš„æŒ‰é’®æ¥æ”¶å–éªŒè¯é“¾æ¥
                                p.small.text-muted æœªéªŒè¯é‚®ç®±çš„æ¸¸æˆè´¦å·å°†é™åˆ¶åŸºæœ¬æƒé™ï¼ˆåŠ å…¥å¤šäººæ¸¸æˆ/ä¸Šä¼ çš®è‚¤ï¼‰ï¼Œè¯·å°½å¿«éªŒè¯æ‚¨çš„é‚®ç®±åœ°å€
                                p.small.text-muted å€˜è‹¥ä½ éœ€è¦ä¿®æ”¹é‚®ä»¶åœ°å€ï¼Œè¯·è”ç³»ç«™ç‚¹ç®¡ç†å‘˜
                                button.btn.btn-verifyemail.btn-primary(type="button") å‘é€éªŒè¯é“¾æ¥
                .col-xl-12
                    #browser-warning.jumbotron
                        p.lead ğŸ˜¥ä½ ä¼¼ä¹æ­£åœ¨ä½¿ç”¨GHAuthä¸æ”¯æŒçš„æµè§ˆå™¨
                        p.browser-warning-label è¿™å¯èƒ½å¯¼è‡´æ‚¨çš„æµè§ˆä½“éªŒå˜å·®ï¼Œè¯·ä½¿ç”¨Firefoxã€Chromeæˆ–å…¶ä»–ç±»ä¼¼çš„ç°ä»£æµè§ˆå™¨ã€‚
                .col-xl-4
                    .jumbotron
                        if config.showAnnouncement
                            p.lead æ¬¢è¿æ¥åˆ° #{config.sitename}
                            div.announcement
                                include:markdown-it ../config/announcement.md
                        else
                            p.lead(style="margin-bottom:0;") æ¬¢è¿æ¥åˆ° #{config.sitename}

                    .jumbotron
                        span.lead æ¸¸æˆæ˜µç§°ï¼š#{user.playername}
                        br
                        span.lead æ³¨å†Œé‚®ç®±ï¼š#{user.email}
                        br
                        span.lead æ³¨å†Œæ—¶é—´ï¼š#{dateFormatter.format(user.time.register)}
                        //- form
                        //-     .input-group.mb-3(style="margin-top:20px;")
                        //-         input#new-playername.form-control(type="text" name="playername" placeholder="æ–°çš„æ˜µç§°" autocomplete="off")
                        //-         .input-group-append
                        //-             button.btn.btn-primary(type="button" disabled) æäº¤
                        //- small.form-text.text-muted æŸäº›æƒ…å†µä¸‹ä¿®æ”¹æ˜µç§°å¯èƒ½å¯¼è‡´ç©å®¶æ•°æ®ä¸¢å¤±ï¼Œä¿®æ”¹å‰è¯·å’¨è¯¢æœåŠ¡å™¨ç®¡ç†å‘˜ä»¥äº†è§£è¯¦ç»†æƒ…å†µã€‚
                    .jumbotron
                        p.lead ä¿®æ”¹å¯†ç 
                        small.text-muted ä¿®æ”¹å¯†ç åä½ å¯èƒ½éœ€è¦é‡æ–°ç™»å½•ä½ çš„æ¸¸æˆ
                        form
                            input(autocomplete='username' style="display: none;")
                            .form-group(style="margin-top:20px;")
                                input#old-password.form-control(type="password" placeholder="æ—§å¯†ç " autocomplete="off")
                            .form-group(style="margin-top:20px;")
                                input#new-password.form-control(type="password" placeholder="æ–°å¯†ç " autocomplete="new-password")
                            .form-group(style="margin-top:20px;")
                                input#repeat-new-password.form-control(type="password" placeholder="é‡å¤æ–°å¯†ç " autocomplete="new-password")
                        button.btn.btn-changepassword.btn-primary.btn-block(type="button") ä¿®æ”¹å¯†ç 

                .col-xl-8
                    .jumbotron.d-none.d-lg-block
                        p.lead å¿«é€Ÿé…ç½®å¯åŠ¨å™¨
                        p(style="font-weight: 100;") Yggdrasil API è®¤è¯åœ°å€ï¼š#[mark #{config.url}/api/yggdrasil]
                        p(style="font-weight: 100;") ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¤åˆ¶ API åœ°å€ï¼Œæˆ–è€…å°†æŒ‰é’®æ‹–åŠ¨è‡³å¯åŠ¨å™¨çš„ä»»æ„ç•Œé¢å³å¯å¿«é€Ÿæ·»åŠ è®¤è¯æœåŠ¡å™¨ã€‚
                        button.btn.btn-primary.btn-dnd-button(type="button" style="cursor: move;" draggable="true" data-clipboard-text=config.url+"/api/yggdrasil") å°†æ­¤æŒ‰é’®æ‹–è‡³å¯åŠ¨å™¨
                    .jumbotron
                        p.lead æ¸¸æˆçš®è‚¤é¢„è§ˆ #[svg#skin-refresh(viewbox="0 0 24 24" width="19" height="19" stroke-width="1" fill="none" stroke-linecap="round" stroke-linejoin="round") #[polyline(points="1 4 1 10 7 10")] #[polyline(points="23 20 23 14 17 14")] #[path(d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15")]]
                        div.viewer-control-container
                            input#skinData(type="text" autocomplete="off" style="display:none;" data-type="0")
                            .custom-control.custom-radio.custom-control-inline
                                input#viewer3DModelRadio.custom-control-input.viewer-radio(type="radio" name="viewerRadio" checked)
                                label.custom-control-label(for="viewer3DModelRadio") æ¨¡å‹
                            .custom-control.custom-radio.custom-control-inline
                                input#viewerRawImage.custom-control-input.viewer-radio(type="radio" name="viewerRadio")
                                label.custom-control-label(for="viewerRawImage") åŸå§‹å›¾ç‰‡
                            .custom-control.custom-radio.custom-control-inline
                                input#viewerRenderGraph.custom-control-input.viewer-radio(type="radio" name="viewerRadio")
                                label.custom-control-label(for="viewerRenderGraph") æ¸²æŸ“å›¾
                        .viewer-group
                            div.placeholder.viewer-container(style="opacity: 1;")
                            div.skinviewer-main-container.viewer-container.active
                                div.skinviewer-container
                                    canvas.skinviewer-canvas
                                div(style="display: flex;justify-content: center;")
                                    .custom-control.custom-radio.custom-control-inline
                                        input#skinviewerWalkRadio.custom-control-input(type="radio" name="skinviewerActionRadio" checked)
                                        label.custom-control-label(for="skinviewerWalkRadio") èµ°
                                    .custom-control.custom-radio.custom-control-inline
                                        input#skinviewerRunRadio.custom-control-input(type="radio" name="skinviewerActionRadio")
                                        label.custom-control-label(for="skinviewerRunRadio") è·‘
                                    .custom-control.custom-checkbox.custom-control-inline
                                        input#skinviewerRotateCheckbox.custom-control-input(type="checkbox" checked)
                                        label.custom-control-label(for="skinviewerRotateCheckbox") æ—‹è½¬
                                    .custom-control.custom-checkbox.custom-control-inline
                                        input#skinviewerPauseCheckbox.custom-control-input(type="checkbox")
                                        label.custom-control-label(for="skinviewerPauseCheckbox") æš‚åœ
                                #skinviewer-loading.viewer-loading.active
                                    .spinner-border.text-light(role="status")
                                        span.sr-only Loading...
                                    strong.text-light Loading...
                            div.rawimage-main-container.viewer-container
                                img#raw-image
                                #rawimage-loading.viewer-loading.active
                                    .spinner-border.text-light(role="status")
                                        span.sr-only Loading...
                                    strong.text-light Loading...
                            div.rendergraph-main-container.viewer-container(data-copyright="")
                                div.rendergraph-canvas-container
                                    canvas(width="1920px" height="1080px")#rendergraph-image
                                #rendergraph-loading.viewer-loading.active
                                    .spinner-border.text-light(role="status")
                                        span.sr-only Loading...
                                    strong.text-light Loading...
                                div.rendergraph-holder
                                div.rendergraph-control-container.pagination
                                    a#rendergraphPreviousButton.previous_page.disabled ä¸Šä¸€å¼ 
                                    a#rendergraphNextButton.next_page ä¸‹ä¸€å¼ 
                    if user.isLoggedIn
                        if user.verified || config.ignoreEmailVerification
                            .jumbotron
                                p.lead æ¸¸æˆçš®è‚¤ä¸Šä¼ 
                                small#emailHelp.form-text.text-muted è¯·å‹¿ä¸Šä¼ è¿è§„å†…å®¹(åŒ…æ‹¬ä½†ä¸é™äºå«æœ‰æ”¿æ²»ï¼Œè‰²æƒ…ï¼ŒèµŒåšä¿¡æ¯)çš„çš®è‚¤å›¾ç‰‡ï¼Œä¸€ç»å‘ç°å°†ç›´æ¥å°ç¦ã€‚<br />
                                .uploadskin-model-radio-container
                                    span.uploadskin-model-radio-label çš®è‚¤æ¨¡å‹ï¼š
                                    .custom-control.custom-radio.custom-control-inline
                                        input#steveTypeRadio.custom-control-input.viewer-radio(type="radio" name="skinUploadTypeRadio" value="0" checked)
                                        label.custom-control-label(for="steveTypeRadio") é»˜è®¤
                                    .custom-control.custom-radio.custom-control-inline
                                        input#alexTypeRadio.custom-control-input.viewer-radio(type="radio" name="skinUploadTypeRadio" value="1")
                                        label.custom-control-label(for="alexTypeRadio") çº¤ç»†
                                .input-group.mb-3(style="margin-top:10px;")
                                    .custom-file
                                        input#skinFileInput.custom-file-input(type="file" accept="image/png")
                                        label.custom-file-label(for="skinFileInput" data-browse="é€‰æ‹©") çš®è‚¤
                                    .input-group-append
                                        button#viewSelectedSkin.btn.btn-primary(type="button") æŸ¥çœ‹æ•ˆæœ
                                button.btn.btn-uploadskin.btn-primary.btn-block(type="button") æäº¤
                        else 
                            .jumbotron
                                p.lead æ¸¸æˆçš®è‚¤ä¸Šä¼ 
                                small#emailHelp.form-text.text-muted æ‚¨éœ€è¦å®Œæˆé¡µé¢é¡¶ç«¯çš„é‚®ç®±éªŒè¯æ‰èƒ½è‡ªå®šä¹‰çš®è‚¤ã€‚<br />


                    if user.isLoggedIn
                        if user.isAdmin
                            include widget/admin.pug




    else
        main(style="display: flex;align-items: center;flex-direction: column;justify-content: center;")
            h1.display-4(style="margin-top:30px;") ğŸš€
            h1.display-4 #{config.sitename}
            h1.lead #{config.description}

append scripts
    if user.isLoggedIn
        script(src="/js/bs-custom-file-input.min.js" aysnc)
        script(src="/js/skinview3d.bundle.js" aysnc)
        script(src="/js/main_loggedin.js" aysnc)
        script(src="/js/crypto-js.js" aysnc)
        script(src="/js/changepassword.js" aysnc)
        script(src="/js/skinviewer_control.js" aysnc)
        script(src="/js/rawimage_control.js" aysnc)
        script(src="/js/rendergraph_control.js" aysnc)
    if user.isLoggedIn
        if user.verified || config.ignoreEmailVerification
            script(src="/js/uploadskin.js" aysnc)
        else 
            script(src="/js/verify_email.js" aysnc)